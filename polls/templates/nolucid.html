<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOC Toolkit | Governance & AI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --ios-black: #000000;
            --ios-card-bg: rgba(28, 28, 30, 0.9);
            --ios-blue: #0A84FF;
            --ios-green: #30D158;
            --ios-indigo: #5E5CE6;
            --ios-orange: #FF9F0A;
            --ios-teal: #64D2FF;
            --ios-red: #FF453A;
            --ios-cyan: #70D7FF;
            --ios-gray: #8E8E93;
            --wire-visible: rgba(255, 255, 255, 0.1);
        }

        body {
            background-color: var(--ios-black);
            color: #FFFFFF;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
            min-height: 100vh;
            display: flex; align-items: center;
            overflow-x: hidden; margin: 0;
        }

        body.ai-assistant-active .left-sidebar-block { display: none !important; }

        .glass-card {
            background: var(--ios-card-bg);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 14px;
            padding: 10px;
            text-align: center;
            font-size: 0.72rem;
            font-weight: 500;
            transition: all 0.4s cubic-bezier(0.15, 0, 0.15, 1);
            z-index: 10;
        }

        #box-ad {
            border: 2.5px solid var(--ios-orange) !important;
            box-shadow: 0 0 20px rgba(255, 159, 10, 0.4);
            background: rgba(255, 159, 10, 0.1);
            color: var(--ios-orange) !important;
            font-weight: 700;
            width: 240px;
            margin-bottom: 40px;
        }

        /* --- MODE HIGHLIGHTING LOGIC --- */

        /* Governance Mode: Highlights SNOW and ELASTIC */
        body.gov-mode #snow-box, 
        body.gov-mode #elastic-box { 
            border-color: var(--ios-orange); 
            box-shadow: 0 0 20px rgba(255, 159, 10, 0.7);
            opacity: 1 !important;
            transform: scale(1.05);
        }

        /* AI Assistant: Highlights SNOW, ELASTIC, LLM, KB */
        body.ai-assistant-active #llm-box, 
        body.ai-assistant-active #snow-box, 
        body.ai-assistant-active #kb-box,
        body.ai-assistant-active #elastic-box { 
            border-color: var(--ios-teal); 
            box-shadow: 0 0 18px rgba(100, 210, 255, 0.7); 
            opacity: 1 !important;
            transform: scale(1.05);
        }

        /* RCA Mode Highlights */
        body.rca-mode #llm-box, body.rca-mode #snow-box, body.rca-mode #elastic-box, body.rca-mode #kb-box { 
            border-color: var(--ios-teal);
            opacity: 1 !important;
        }

        /* Dimming Logic */
        body.gov-mode .target-node:not(#snow-box):not(#elastic-box),
        body.ai-assistant-active .target-node:not(#llm-box):not(#snow-box):not(#kb-box):not(#elastic-box),
        body.rca-mode .target-node:not(#llm-box):not(#snow-box):not(#kb-box):not(#elastic-box) { 
            opacity: 0.15; 
            filter: grayscale(1);
        }

        .service-boundary {
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 40px;
            padding: 50px;
            background: radial-gradient(circle at top, rgba(10, 132, 255, 0.04) 0%, transparent 75%);
            min-width: 600px;
            position: relative;
        }

        .core-hub { border: 1.5px solid var(--ios-blue); padding: 24px !important; }
        
        .btn-ios { 
            background: rgba(255,255,255,0.06); 
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 9px; padding: 10px; cursor: pointer; transition: 0.2s;
            font-size: 0.7rem; color: var(--ios-gray);
        }
        .btn-ios:hover { background: rgba(255,255,255,0.15); color: #fff; }
        .btn-ios.active { background: var(--ios-blue); color: #fff; border-color: #fff; box-shadow: 0 0 20px rgba(10, 132, 255, 0.4); }

        #canvas-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        .path-line { fill: none; stroke-width: 1.8; stroke-dasharray: 6, 12; animation: dash 30s linear infinite; transition: stroke 0.4s, opacity 0.4s; }
        @keyframes dash { from { stroke-dashoffset: 600; } to { stroke-dashoffset: 0; } }
        .label-apple { font-size: 0.6rem; text-transform: uppercase; letter-spacing: 2px; color: var(--ios-gray); font-weight: 700; margin-bottom: 12px; }
    </style>
</head>
<body id="master-body">

    <svg id="canvas-svg" xmlns="http://www.w3.org/2000/svg"></svg>

    <div class="container-fluid px-5">
        <div class="row align-items-center justify-content-between">
            
            <div class="col-lg-2 left-sidebar-block">
                <p class="label-apple text-center">Control Center</p>
                <div class="d-grid gap-4">
                    <div class="glass-card" id="box-dash" style="border-color: var(--ios-blue); color: var(--ios-blue);">GOC Dashboard</div>
                </div>
            </div>

            <div class="col-lg-6 d-flex flex-column align-items-center">
                <div class="glass-card" id="box-ad">Active Directory SSO</div>
                
                <div class="service-boundary" id="boundary">
                    <p class="label-apple text-center">Management Layer</p>
                    <div class="glass-card core-hub" id="core-engine">
                        <div style="color:var(--ios-blue); font-weight: 700; font-size: 1.1rem; margin-bottom: 15px;">Django Core Controller</div>
                        <div class="row g-2">
                            <div class="col-6"><div class="btn-ios mode-btn" id="btn-ai-assistant">AI Assistant</div></div>
                            <div class="col-6"><div class="btn-ios mode-btn" id="btn-rem" style="color: var(--ios-green)">Auto-Remediate</div></div>
                            <div class="col-6"><div class="btn-ios mode-btn" id="btn-rca" style="color: var(--ios-teal)">RCA Analysis</div></div>
                            <div class="col-6"><div class="btn-ios mode-btn" id="btn-gov" style="color: var(--ios-orange)">Governance Mode</div></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-2">
                <p class="label-apple text-center">Data Ingestion</p>
                <div class="d-grid gap-2 mb-4">
                    <div class="glass-card target-node" id="elastic-box">Elasticsearch (ESS)</div>
                    <div class="glass-card target-node" id="snow-box">ServiceNow (SNOW)</div>
                    <div class="glass-card target-node" id="kb-box">Knowledge Base (Confluence)</div>
                </div>
                <p class="label-apple text-center">Intelligence</p>
                <div class="glass-card target-node mb-5" id="llm-box" style="color: var(--ios-teal);">Org LLM Engine</div>
            </div>
        </div>
    </div>

    <script>
        const body = document.getElementById('master-body');
        const btns = document.querySelectorAll('.mode-btn');
        let drawInt;

        function resetAll() {
            body.classList.remove('ai-assistant-active', 'gov-mode', 'rca-mode');
            btns.forEach(b => b.classList.remove('active'));
        }

        function refresh() {
            clearInterval(drawInt);
            drawInt = setInterval(draw, 10);
            setTimeout(() => clearInterval(drawInt), 600);
        }

        document.getElementById('btn-ai-assistant').onclick = function() { resetAll(); body.classList.add('ai-assistant-active'); this.classList.add('active'); refresh(); };
        document.getElementById('btn-gov').onclick = function() { resetAll(); body.classList.add('gov-mode'); this.classList.add('active'); refresh(); };
        document.getElementById('btn-rca').onclick = function() { resetAll(); body.classList.add('rca-mode'); this.classList.add('active'); refresh(); };
        document.getElementById('btn-rem').onclick = function() { resetAll(); this.classList.add('active'); refresh(); };

        function draw() {
            const svg = document.getElementById('canvas-svg');
            const core = document.getElementById('core-engine').getBoundingClientRect();
            const ad = document.getElementById('box-ad').getBoundingClientRect();
            const bound = document.getElementById('boundary').getBoundingClientRect();
            svg.innerHTML = '';

            const connect = (x1, y1, x2, y2, color, width = 1.8) => {
                const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                const cp = (x1 + x2) / 2;
                path.setAttribute("d", `M ${x1} ${y1} C ${cp} ${y1}, ${cp} ${y2}, ${x2} ${y2}`);
                path.setAttribute("class", "path-line");
                path.style.stroke = color;
                path.style.strokeWidth = width;
                return path;
            };

            // AD Connector
            svg.appendChild(connect(ad.left + ad.width/2, ad.bottom, ad.left + ad.width/2, bound.top, 'var(--ios-orange)', 2.5));

            // Logic for right side wires
            ['elastic-box', 'snow-box', 'kb-box', 'llm-box'].forEach(id => {
                const r = document.getElementById(id).getBoundingClientRect();
                let color = 'var(--wire-visible)';
                
                // Governance Wire Logic (Orange for Elastic and Snow)
                if(body.classList.contains('gov-mode') && (id === 'elastic-box' || id === 'snow-box')) {
                    color = 'var(--ios-orange)';
                }
                
                // AI/RCA Wire Logic (Teal)
                if(body.classList.contains('ai-assistant-active') || body.classList.contains('rca-mode')) {
                    if(id !== 'splunk-box') color = 'var(--ios-teal)';
                }
                
                svg.appendChild(connect(r.left, r.top+r.height/2, core.right, core.top+core.height/2, color));
            });

            if (!body.classList.contains('ai-assistant-active')) {
                const dash = document.getElementById('box-dash').getBoundingClientRect();
                svg.appendChild(connect(dash.right, dash.top+dash.height/2, core.left, core.top+core.height/2, 'rgba(10, 132, 255, 0.4)'));
            }
        }
        window.onresize = draw;
        setTimeout(draw, 100);
    </script>
</body>
</html>